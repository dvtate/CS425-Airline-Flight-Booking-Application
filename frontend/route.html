<!doctype html>
<!DOCTYPE html>
<html>
<head>
	<title>Flight List</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mini.css/3.0.1/mini-default.min.css">
		<link rel="stylesheet" href="main.css" />
		<script src="main.js"> </script>
		<style>
				#user_name {
                    text-align: right;
                }

		</style>
</head>
<body>
	<div>
		<h2>Flight List</h2>
		<fieldset>
			<div class="row">
        			<div class="col-sm-12 col-md-6 col-lg-6">
            			<h1><button type="button" onclick="window.location.href ='index.html';">Home</button></h1>
        			</div>


        			<div class="col-sm-12 col-md-6 col-lg-6" id="user_name">
            			<h1>Name<h1>
        			</div>

    		</div>
    		<div>
				<fieldset>
					<h2>Ticket</h2>
					<div class="row">
						<table style="width: 100%">
							<tr>
	            				<th>Time</th>
	            				<th>Price</th>
	            				<th>Route</th>
	            				<th>Actions</th>
	            			</tr>
	            			<tr>
	            				<td>1:34</td>
	            				<td>$300</td>
	            				<td>ATL->SFO->MDW</td>
	            				<td><button type="button" onclick="book()">Book</button></td>
	            			</tr>
	            			<tr>
	            				<td>2:00</td>
	            				<td>$150</td>
	            				<td>ATL->NIA->MDW</td>
	            				<td><button type="button" onclick="book()">Book</button></td>
	            			</tr>
	            			<tr>
	            				<td>1:25</td>
	            				<td>$205</td>
	            				<td>ATL->SMH->MDW</td>
	            				<td><button type="button" onclick="book()">Book</button></td>
	            			</tr>
	            			<tr>
	            				<td>3:45</td>
	            				<td>$425</td>
	            				<td>ATL->ORD->MDW</td>
	            				<td><button type="button" onclick="book()">Book</button></td>
	            			</tr>
	            			<tr>
	            				<td>1:25</td>
	            				<td>$205</td>
	            				<td>ATL->SMH->MDW</td>
	            				<td><button type="button" onclick="book()">Book</button></td>
	            			</tr>
	            			<tr>
	            				<td>3:45</td>
	            				<td>$425</td>
	            				<td>ATL->ORD->MDW</td>
	            				<td><button type="button" onclick="book()">Book</button></td>
							</tr>
						</table>
					</div>
				</fieldset>
    		</div>
		</fieldset>
	</div>
	<script>
		(async function populate(){

			function findGetParameter(parameterName) {
				let result = null, tmp = [];
				location.search.substr(1).split("&")
					.forEach(function (item) {
						tmp = item.split("=");
						if (tmp[0] === parameterName) result = decodeURIComponent(tmp[1]);
					});
				return result;
			}

			const departAirportId = findGetParameter("depart");
			const arriveAirportId = findGetParameter("arrive");
			const tokens = findGetParameter("transfers") || 2;
			const waitTime = findGetParameter("wait") || 0;
			const departTime = findGetParameter("date") || (new Date()).toString();
			const list = await cs425.api.post("/flights/search", {
				departAirportId, arriveAirportId, tokens, waitTime, departTime, });

			console.log(list);



			
		});

		async function book() {
		}
	</script>
</body>
</html>
