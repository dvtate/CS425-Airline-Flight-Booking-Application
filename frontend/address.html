<!doctype html>
<html>
	<!-- this page will likely be embedded somewhere else -->
	<head>
		<title>ManageMyAddress</title>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mini.css/3.0.1/mini-default.min.css">
		<link rel="stylesheet" href="main.css" />
		<script src="main.js"> </script>

	</head>
	<body>
		<div class = "creditCard">
			<h2>Manage Addresses</h2>
			<form>
				<fieldset>
					<lengend> <button type="button" onclick= "window.location.href ='index.html';">Home</button> <button type="button" onclick="window.location.href ='addNewAddress.html';">Add A New Address</button></lengend>
					<div class = "row">
						<table style="width:100%" id="address-table">
						  <tr>
						    <th>Address line1</th>
						    <th>Address line2</th>
						    <th>Postal Code</th>
						    <th>City</th>
						    <th>State</th>
						    <th>Country</th>
						    <th>Action</th>
						  </tr>

						  <tr>
						    <td>9999 N 18th st</td>
						    <td></td>
						    <td>60311</td>
						    <td>Chicago</td>
						    <td>IL</td>
						    <td>US</td>
						    <td><button type="button" onclick="delete()">Delete</button></td>
						  </tr>
						  <tr>
						    <td>3321 E 56th ST</td>
						    <td></td>
						    <td>60333</td>
						    <td>Chicago</td>
						    <td>IL</td>
						    <td>US</td>
						    <td><button type="button" onclick="delete()">Delete</button></td>
						  </tr>
						</table>


				</fieldset>
			</form>

			<script>
				(async function pupulateList(){
					const t = document.getElementById("address-table");
					const ret = await cs425.api.get("/customer/address/list");
					ret.forEach(addr =>
						t.innerHTML += `<tr>
							<td>${ret.line1}</td>
							<td>${ret.line2}</td>
							<td>${ret.postalCode}</td>
							<td>${ret.city}</td>
							<td>${ret.state}</td>
							<td>${ret.country}</td>
							<td><button type="button"
								onclick="delete(${ret.addressId})"
							>delete</button></td>
						</tr>`);
				})();


			</script>

	</body>
